<link rel="stylesheet" href="../../static/css_style_home.css">
<link rel="stylesheet" href="../../static/css_style_dash.css">
<link rel="stylesheet" href="../../static/css_style_model.css">
<link rel="stylesheet" href="../../static/css_style_login.css">
{% extends "navbar.html" %}

{% block content %}
<!-- Model Navigation -->
<div class="modelnav" id="modelnav">
    <div class="model-section-left">
        <h2 style="position: absolute; top: 0; left: 30%; transform: translateX(-50%);">Result Image</h2>
        {% if error %}
            <div class="alert alert-danger">
                {{ error }}
            </div>
        {% endif %}
        <div class="panel1"style="width : 80%;height:80%;margin-top:15px;">
            <div class="panel-body">

                <!-- Placeholder to show when job is processing -->
                <div id="processing-message" style="display:none;">
                    <p>Processing your files...</p>
                </div>

                <!-- Image Display Area (Initially hidden) -->
                <div id="image-display">
                    <!-- Display uploaded images and information -->
                    <div id="images-container" style="max-width: 100%; max-height: 300px; overflow-y: auto;">
                        <!-- <p>{{list_of_image_path}}</p> -->
                        {% for image_path in list_of_image_path %}
                            <!-- <div class="image-containerss" >
                                <p>testttt</p> -->
                                <!-- Display the image -->
                                <img src="{{ url_for('static', filename=image_path) }}" alt="Processed Image" style="width: 200px; margin: 10px;">
                            <!-- </div> -->
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="model-section-right">
        <h2>Equipment List</h2>
        <div id="img-info" style="max-height: 400px; overflow-y: auto;">
            <!-- Jinja Loop for displaying image info -->
            {% for image_info in list_of_image_info %}
                <div class="info-box-container" style="border: 1px solid #ccc; margin-bottom: 10px; padding: 10px; background-color: rgba(0, 0, 0, 0.4); border-radius: 8px;">
                    {% for key, value in image_info.items() %}
                        {% if value != 0 %}
                            <p>{{ key }}: {{ value }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>


<!-- JavaScript for handling file uploads and job status -->
<script>
    function deleteData() {
        // Logic สำหรับลบข้อมูล สามารถส่งคำขอ AJAX หรือเปลี่ยนเส้นทางไปที่ URL สำหรับการลบข้อมูล
        if (confirm("คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้?")) {
            // ส่งคำขอลบข้อมูลไปที่ backend
            // ตัวอย่างใช้ fetch API:
            fetch('/delete', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ delete: true }), // คุณสามารถใส่ข้อมูลเพิ่มเติมที่จำเป็น
            })
            .then(response => {
                if (response.ok) {
                    // หากลบสำเร็จให้ทำการรีเฟรชหรือเปลี่ยนเส้นทาง
                    window.location.reload();
                } else {
                    alert('ลบข้อมูลไม่สำเร็จ');
                }
            });
        }
    }
</script>
{% endblock %}
